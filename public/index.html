<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <script>
        // Initialize theme immediately to prevent flash
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-powered GitHub pull request review assistant">
    <title>Pair Review</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <!-- Google Fonts: DM Sans and JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Typography */
            --font-sans: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            --font-mono: 'JetBrains Mono', 'SF Mono', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;

            /* Layout dimensions */
            --header-height: 64px;

            /* Transitions */
            --transition-fast: 0.1s ease;
            --transition-default: 0.2s ease;

            /* Radii */
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-lg: 8px;
            --radius-xl: 12px;

            /* Light theme colors */
            --color-bg-primary: #ffffff;
            --color-bg-secondary: #f6f8fa;
            --color-bg-tertiary: #f3f4f6;
            --color-bg-page: #f6f8fa;

            --color-text-primary: #24292f;
            --color-text-secondary: #57606a;
            --color-text-tertiary: #656d76;
            --color-text-link: #0969da;

            --color-border-primary: #d1d9e0;
            --color-border-secondary: #e1e4e8;

            --color-accent-primary: #0969da;
            --color-accent-hover: #0860ca;
            --color-accent-emphasis: #238636;
            --color-accent-emphasis-hover: #2ea043;

            --color-danger: #d1242f;
            --color-danger-hover: #b91c1c;

            --color-shadow: rgba(27, 31, 36, 0.04);

            /* AI Identity - Amber/Gold accent */
            --ai-primary: #d97706;
            --ai-secondary: #f59e0b;
            --ai-subtle: rgba(217, 119, 6, 0.08);
            --ai-glow: rgba(217, 119, 6, 0.15);
            --ai-border: rgba(217, 119, 6, 0.3);
        }

        [data-theme="dark"] {
            /* Dark theme colors */
            --color-bg-primary: #0d1117;
            --color-bg-secondary: #161b22;
            --color-bg-tertiary: #1c2128;
            --color-bg-page: #0d1117;

            --color-text-primary: #c9d1d9;
            --color-text-secondary: #8b949e;
            --color-text-tertiary: #6e7681;
            --color-text-link: #58a6ff;

            --color-border-primary: #30363d;
            --color-border-secondary: #21262d;

            --color-accent-primary: #58a6ff;
            --color-accent-hover: #1f6feb;
            --color-accent-emphasis: #238636;
            --color-accent-emphasis-hover: #2ea043;

            --color-danger: #f85149;
            --color-danger-hover: #da3633;

            --color-shadow: rgba(0, 0, 0, 0.3);

            /* AI Identity - Amber/Gold accent for dark theme */
            --ai-primary: #f59e0b;
            --ai-secondary: #fbbf24;
            --ai-subtle: rgba(245, 158, 11, 0.1);
            --ai-glow: rgba(245, 158, 11, 0.2);
            --ai-border: rgba(245, 158, 11, 0.3);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--color-bg-page);
            color: var(--color-text-primary);
            line-height: 1.5;
            font-size: 14px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* App container */
        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Sticky Header */
        .header {
            height: var(--header-height);
            background: var(--color-bg-primary);
            border-bottom: 1px solid var(--color-border-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            gap: 24px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px var(--color-shadow);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 4px;
            text-decoration: none;
            color: inherit;
        }

        .logo-icon {
            width: 24px;
            height: 24px;
            color: var(--ai-primary);
        }

        .logo-text {
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: -0.02em;
            color: var(--color-text-secondary);
        }

        .logo-accent {
            color: var(--color-text-primary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Theme toggle button */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
            text-decoration: none;
        }

        .btn-icon {
            padding: 8px;
            width: 36px;
            height: 36px;
            justify-content: center;
        }

        #theme-toggle {
            background: transparent;
            border: 1px solid var(--color-border-primary);
            color: var(--color-text-secondary);
        }

        #theme-toggle:hover {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
        }

        /* Help button */
        #help-btn {
            background: transparent;
            border: 1px solid var(--color-border-primary);
            color: var(--color-text-secondary);
            font-weight: 600;
            font-size: 14px;
        }

        #help-btn:hover {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
        }

        /* Help Modal */
        .help-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-default), visibility var(--transition-default);
        }

        .help-modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        [data-theme="dark"] .help-modal-overlay {
            background: rgba(0, 0, 0, 0.7);
        }

        .help-modal {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-xl);
            max-width: 750px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px var(--color-shadow), 0 0 0 1px var(--color-border-secondary);
            transform: scale(0.95);
            transition: transform var(--transition-default);
        }

        .help-modal-overlay.visible .help-modal {
            transform: scale(1);
        }

        .help-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 24px;
            border-bottom: 1px solid var(--color-border-secondary);
        }

        .help-modal-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin: 0;
        }

        .help-modal-close {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            padding: 0;
            background: transparent;
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            color: var(--color-text-tertiary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .help-modal-close:hover {
            background: var(--color-bg-secondary);
            border-color: var(--color-border-primary);
            color: var(--color-text-primary);
        }

        .help-modal-content {
            padding: 24px;
        }

        .help-modal-content h3 {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin: 0 0 12px 0;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .help-modal-content h3:not(:first-child) {
            margin-top: 24px;
        }

        .help-modal-content p {
            font-size: 14px;
            color: var(--color-text-secondary);
            margin: 0 0 12px 0;
            line-height: 1.6;
        }

        .help-modal-content code {
            background-color: var(--color-bg-secondary);
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-family: var(--font-mono);
            font-size: 13px;
        }

        .help-modal-content pre {
            background-color: var(--color-bg-tertiary);
            color: var(--color-text-primary);
            padding: 16px;
            border-radius: var(--radius-md);
            margin: 12px 0;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 13px;
            line-height: 1.5;
        }

        .help-modal-content pre code {
            background: none;
            padding: 0;
        }

        .help-modal-content ul {
            margin: 0 0 12px 0;
            padding-left: 20px;
        }

        .help-modal-content li {
            font-size: 14px;
            color: var(--color-text-secondary);
            margin-bottom: 8px;
            line-height: 1.6;
        }

        [data-theme="dark"] .theme-icon-light {
            display: none !important;
        }

        [data-theme="dark"] .theme-icon-dark {
            display: block !important;
        }

        [data-theme="light"] .theme-icon-dark,
        :root:not([data-theme="dark"]) .theme-icon-dark {
            display: none !important;
        }

        [data-theme="light"] .theme-icon-light,
        :root:not([data-theme="dark"]) .theme-icon-light {
            display: block !important;
        }

        /* Main content area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 48px 20px;
        }

        /* Welcome section */
        .welcome-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            max-width: 960px;
            width: 100%;
        }

        /* Start Review Section */
        .start-review-section {
            width: 100%;
            max-width: 720px;
            margin-bottom: 48px;
            padding-top: 24px;
        }

        .start-review-form {
            display: flex;
            gap: 8px;
        }

        .start-review-input {
            flex: 1;
            padding: 12px 16px;
            font-family: var(--font-sans);
            font-size: 15px;
            line-height: 20px;
            color: var(--color-text-primary);
            background-color: var(--color-bg-primary);
            border: 2px solid var(--ai-primary);
            border-radius: var(--radius-md);
            outline: none;
            box-shadow: 0 0 0 3px var(--ai-glow);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        .start-review-input:focus {
            box-shadow: 0 0 0 4px var(--ai-glow), 0 0 12px var(--ai-glow);
        }

        .start-review-input::placeholder {
            color: var(--color-text-tertiary);
        }

        .start-review-input:disabled {
            background-color: var(--color-bg-secondary);
            cursor: not-allowed;
        }

        .start-review-btn {
            padding: 10px 20px;
            font-family: var(--font-sans);
            font-size: 14px;
            font-weight: 500;
            line-height: 20px;
            color: #ffffff;
            background-color: var(--ai-primary);
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: background-color var(--transition-fast);
            white-space: nowrap;
        }

        .start-review-btn:hover:not(:disabled) {
            background-color: #b45309;
        }

        .start-review-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-browse {
            background-color: var(--ai-subtle);
            color: var(--ai-primary);
            border: 1px solid var(--ai-border);
        }

        .btn-browse:hover:not(:disabled) {
            background-color: var(--ai-glow);
            border-color: var(--ai-primary);
        }

        .start-review-error {
            margin-top: 12px;
            padding: 10px 14px;
            font-size: 13px;
            color: var(--color-danger);
            background-color: rgba(208, 36, 47, 0.08);
            border: 1px solid rgba(208, 36, 47, 0.3);
            border-radius: var(--radius-md);
            display: none;
        }

        [data-theme="dark"] .start-review-error {
            background-color: rgba(248, 81, 73, 0.1);
            border-color: rgba(248, 81, 73, 0.3);
        }

        .start-review-error.visible {
            display: block;
        }

        .start-review-error.info {
            color: var(--color-fg-muted);
            background-color: rgba(9, 105, 218, 0.08);
            border-color: rgba(9, 105, 218, 0.3);
        }

        [data-theme="dark"] .start-review-error.info {
            background-color: rgba(56, 139, 253, 0.1);
            border-color: rgba(56, 139, 253, 0.3);
        }

        .start-review-loading {
            display: none;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .start-review-loading.visible {
            display: flex;
        }

        .start-review-loading .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--color-border-primary);
            border-top-color: var(--color-accent-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Usage Info (shown when no reviews) */
        .usage-info {
            background-color: var(--color-bg-primary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
            text-align: left;
            max-width: 600px;
            width: 100%;
            margin-bottom: 32px;
        }

        .usage-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--color-text-primary);
        }

        .usage-info p {
            color: var(--color-text-secondary);
            margin-bottom: 12px;
        }

        .usage-info code {
            background-color: var(--color-bg-secondary);
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-family: var(--font-mono);
            font-size: 13px;
        }

        .usage-info pre {
            background-color: var(--color-bg-tertiary);
            color: var(--color-text-primary);
            padding: 16px;
            border-radius: var(--radius-md);
            margin: 12px 0;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 13px;
            line-height: 1.5;
        }

        .usage-info pre code {
            background: none;
            padding: 0;
        }

        /* Recent Reviews Section */
        .recent-reviews-section {
            width: 100%;
            max-width: 960px;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--color-border-secondary);
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-tertiary);
        }

        /* Recent Reviews Table */
        .recent-reviews-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .recent-reviews-table thead {
            background: var(--color-bg-secondary);
        }

        .recent-reviews-table th {
            text-align: left;
            padding: 12px 16px;
            font-size: 12px;
            font-weight: 600;
            color: var(--color-text-tertiary);
            border-bottom: 1px solid var(--color-border-primary);
            white-space: nowrap;
        }

        .recent-reviews-table td {
            padding: 12px 16px;
            font-size: 14px;
            border-bottom: 1px solid var(--color-border-secondary);
            vertical-align: middle;
        }

        .recent-reviews-table tbody tr:last-child td {
            border-bottom: none;
        }

        .recent-reviews-table tbody tr {
            transition: background-color var(--transition-fast);
        }

        .recent-reviews-table tbody tr:hover {
            background: var(--color-bg-secondary);
        }

        .recent-reviews-table .col-repo {
            font-weight: 500;
            color: var(--color-text-primary);
        }

        .recent-reviews-table .col-pr {
            white-space: nowrap;
        }

        .recent-reviews-table .col-pr a {
            color: var(--ai-primary);
            text-decoration: none;
            font-weight: 500;
            font-family: var(--font-mono);
        }

        .recent-reviews-table .col-pr a:hover {
            color: var(--ai-secondary);
            text-decoration: underline;
        }

        .recent-reviews-table .col-title {
            max-width: 320px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: var(--color-text-secondary);
        }

        .recent-reviews-table .col-time {
            color: var(--color-text-tertiary);
            font-size: 13px;
            white-space: nowrap;
        }

        .recent-reviews-table .col-author {
            white-space: nowrap;
            color: var(--color-text-secondary);
            font-size: 13px;
        }

        .recent-reviews-table .col-author a {
            color: var(--color-text-secondary);
            text-decoration: none;
        }

        .recent-reviews-table .col-author a:hover {
            color: var(--ai-primary);
            text-decoration: underline;
        }

        .recent-reviews-table .col-actions {
            text-align: center;
            white-space: nowrap;
        }

        .local-table .col-actions {
            text-align: right;
        }

        .local-table .btn-repo-settings {
            margin-right: 4px;
        }

        .btn-delete-worktree,
        .btn-repo-settings {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            padding: 0;
            background: transparent;
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            color: var(--color-text-tertiary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .btn-delete-worktree:hover {
            background-color: rgba(208, 36, 47, 0.08);
            border-color: rgba(208, 36, 47, 0.3);
            color: var(--color-danger);
        }

        [data-theme="dark"] .btn-delete-worktree:hover {
            background-color: rgba(248, 81, 73, 0.1);
            border-color: rgba(248, 81, 73, 0.3);
        }

        .btn-repo-settings:hover {
            background-color: var(--color-bg-secondary);
            border-color: var(--color-border-primary);
            color: var(--color-text-primary);
        }

        .recent-reviews-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--color-text-secondary);
            font-size: 14px;
            background: var(--color-bg-primary);
            border: 1px dashed var(--color-border-primary);
            border-radius: var(--radius-lg);
        }

        .recent-reviews-empty p {
            margin: 0;
            line-height: 1.6;
        }

        .recent-reviews-loading {
            text-align: center;
            padding: 32px 20px;
            color: var(--color-text-tertiary);
            font-size: 14px;
        }

        /* Show More button for pagination */
        .show-more-container {
            display: flex;
            justify-content: center;
            padding: 16px 0 0;
        }

        .btn-show-more {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 24px;
            font-family: var(--font-sans);
            font-size: 13px;
            font-weight: 500;
            color: var(--color-text-secondary);
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .btn-show-more:hover:not(:disabled) {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
        }

        .btn-show-more:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-show-more .spinner {
            width: 14px;
            height: 14px;
            border: 2px solid var(--color-border-primary);
            border-top-color: var(--color-accent-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            display: none;
        }

        .btn-show-more.loading .spinner {
            display: block;
        }

        .btn-show-more.loading .btn-show-more-text {
            display: none;
        }

        /* Tab Container Styles */
        .tab-container {
            width: 100%;
        }

        .tab-bar {
            display: flex;
            gap: 0;
            border-bottom: 1px solid var(--color-border-secondary);
            margin-bottom: 16px;
        }

        .tab-btn {
            padding: 8px 16px;
            font-family: var(--font-sans);
            font-size: 13px;
            font-weight: 500;
            color: var(--color-text-secondary);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .tab-btn:hover {
            color: var(--color-text-primary);
        }

        .tab-btn.active {
            color: var(--ai-primary);
            border-bottom-color: var(--ai-primary);
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        /* Local Reviews Table - tighter spacing */
        .recent-reviews-table.local-table th,
        .recent-reviews-table.local-table td {
            padding: 8px 10px;
        }

        .col-local-path {
            max-width: 260px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            /* RTL direction + LTR alignment makes ellipsis truncate from the left, showing the end of long paths */
            direction: rtl;
            text-align: left;
            color: var(--color-text-tertiary);
            font-family: var(--font-mono);
            font-size: 12px;
        }

        .col-local-name {
            max-width: 180px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: var(--ai-primary);
        }

        .col-local-sha {
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--color-text-tertiary);
            white-space: nowrap;
        }

        .col-local-name a {
            color: var(--ai-primary);
            text-decoration: none;
            font-weight: 500;
            font-family: var(--font-mono);
        }

        .col-local-name a:hover {
            color: var(--ai-secondary);
            text-decoration: underline;
        }

        .col-local-name em {
            font-style: italic;
        }

        /* Delete session button */
        .btn-delete-session {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            padding: 0;
            background: transparent;
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            color: var(--color-text-tertiary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .btn-delete-session:hover {
            background-color: rgba(208, 36, 47, 0.08);
            border-color: rgba(208, 36, 47, 0.3);
            color: var(--color-danger);
        }

        [data-theme="dark"] .btn-delete-session:hover {
            background-color: rgba(248, 81, 73, 0.1);
            border-color: rgba(248, 81, 73, 0.3);
        }

        /* Inline delete confirmation â€” use higher specificity to override tbody tr:hover */
        .recent-reviews-table tbody tr.delete-confirm-row td {
            background-color: rgba(208, 36, 47, 0.04);
        }

        [data-theme="dark"] .recent-reviews-table tbody tr.delete-confirm-row td {
            background-color: rgba(248, 81, 73, 0.06);
        }

        .delete-confirm-inner {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .delete-confirm-inner .btn-confirm-yes {
            padding: 2px 10px;
            font-size: 12px;
            font-weight: 500;
            background: var(--color-danger);
            color: #ffffff;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
        }

        .delete-confirm-inner .btn-confirm-yes:hover {
            background: var(--color-danger-hover);
        }

        .delete-confirm-inner .btn-confirm-no {
            padding: 2px 10px;
            font-size: 12px;
            font-weight: 500;
            background: transparent;
            color: var(--color-text-secondary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-sm);
            cursor: pointer;
        }

        .delete-confirm-inner .btn-confirm-no:hover {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
        }

        /* Start review section spacing inside unified tabs */
        .tab-pane .start-review-section {
            max-width: 100%;
            margin-bottom: 24px;
            padding-top: 0;
        }

        /* Initial loading state - hide content until JS determines what to show */
        .loading-hidden {
            display: none !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 32px 16px;
            }

            .start-review-form {
                flex-direction: column;
            }

            .start-review-input {
                width: 100%;
            }

            .usage-info {
                padding: 20px;
            }

            .recent-reviews-table {
                font-size: 13px;
            }

            .recent-reviews-table th,
            .recent-reviews-table td {
                padding: 10px 12px;
            }

            .recent-reviews-table .col-title {
                max-width: 180px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sticky Header -->
        <header class="header">
            <div class="header-left">
                <a href="/" class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="24" height="24">
                        <path transform="rotate(-50 12 12)" d="M18.178 8c5.096 0 5.096 8 0 8-5.095 0-7.133-8-12.356-8-5.096 0-5.096 8 0 8 5.223 0 7.26-8 12.356-8z"/>
                    </svg>
                    <span class="logo-text">pair<span class="logo-accent">review</span></span>
                </a>
            </div>
            <div class="header-right">
                <button class="btn btn-icon" id="theme-toggle" title="Toggle theme">
                    <svg class="theme-icon-light" viewBox="0 0 16 16" fill="currentColor" width="16" height="16">
                        <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm0-1.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5Zm0-10.5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Zm0 13a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13ZM2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.75.75 0 0 1-1.06 1.06l-1.06-1.06a.75.75 0 0 1 0-1.06Zm9.193 9.193a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061ZM16 8a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8ZM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8Zm10.657-5.657a.75.75 0 0 1 0 1.061l-1.061 1.06a.75.75 0 1 1-1.06-1.06l1.06-1.06a.75.75 0 0 1 1.06 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 0 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0Z"/>
                    </svg>
                    <svg class="theme-icon-dark" viewBox="0 0 16 16" fill="currentColor" width="16" height="16" style="display: none;">
                        <path d="M9.598 1.591a.749.749 0 0 1 .785-.175 7.001 7.001 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786Z"/>
                    </svg>
                </button>
                <button class="btn btn-icon" id="help-btn" title="Help" aria-label="Open help modal">?</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="welcome-section" id="welcome-section">
                <!-- Unified Tab Section -->
                <div class="recent-reviews-section" id="recent-reviews-section">
                    <div class="section-header" id="recent-reviews-header">
                        <div class="tab-bar" id="unified-tab-bar">
                            <button class="tab-btn active" data-tab="pr-tab" type="button">Pull Requests</button>
                            <button class="tab-btn" data-tab="local-tab" type="button">Local Reviews</button>
                        </div>
                    </div>

                    <!-- Pull Requests Tab: Input + Listing -->
                    <div class="tab-pane active" id="pr-tab">
                        <div class="start-review-section">
                            <form class="start-review-form" id="start-review-form">
                                <input
                                    type="text"
                                    class="start-review-input"
                                    id="pr-url-input"
                                    placeholder="Enter GitHub or Graphite PR URL"
                                    autocomplete="off"
                                    spellcheck="false"
                                >
                                <button type="submit" class="start-review-btn" id="start-review-btn">
                                    Start Review
                                </button>
                            </form>
                            <div class="start-review-error" id="start-review-error-pr"></div>
                            <div class="start-review-loading" id="start-review-loading-pr">
                                <div class="spinner"></div>
                                <span id="start-review-loading-text-pr">Creating worktree and fetching PR data...</span>
                            </div>
                        </div>
                        <div id="recent-reviews-container" class="recent-reviews-loading">
                            Loading recent reviews...
                        </div>
                    </div>

                    <!-- Local Reviews Tab: Input + Listing -->
                    <div class="tab-pane" id="local-tab">
                        <div class="start-review-section">
                            <form class="start-review-form" id="start-local-form">
                                <input
                                    type="text"
                                    class="start-review-input"
                                    id="local-path-input"
                                    placeholder="Enter directory path (e.g. /Users/me/project)"
                                    autocomplete="off"
                                    spellcheck="false"
                                >
                                <button type="button" class="start-review-btn btn-browse" id="browse-local-btn" title="Browse for directory">
                                    Browse
                                </button>
                                <button type="submit" class="start-review-btn" id="start-local-btn">
                                    Review Local
                                </button>
                            </form>
                            <div class="start-review-error" id="start-review-error-local"></div>
                            <div class="start-review-loading" id="start-review-loading-local">
                                <div class="spinner"></div>
                                <span id="start-review-loading-text-local">Starting local review...</span>
                            </div>
                        </div>
                        <div id="local-reviews-container" class="recent-reviews-loading">
                            Loading local reviews...
                        </div>
                    </div>
                </div>

                <!-- Usage Info (shown when no reviews, hidden initially during loading) -->
                <!-- Content is populated from help modal via JS to avoid duplication -->
                <div class="usage-info loading-hidden" id="usage-info"></div>
            </div>
        </main>
    </div>

    <!-- Help Modal -->
    <div class="help-modal-overlay" id="help-modal-overlay">
        <div class="help-modal" id="help-modal" role="dialog" aria-labelledby="help-modal-title" aria-modal="true">
            <div class="help-modal-header">
                <h2 class="help-modal-title" id="help-modal-title">Getting Started</h2>
                <button class="help-modal-close" id="help-modal-close" title="Close">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
                    </svg>
                </button>
            </div>
            <div class="help-modal-content">
                <p>pair-review is an AI-assisted code review partner. You can start a review from the command line or by pasting a PR URL above.</p>

                <h3>Review a PR by Number</h3>
                <p>From within a cloned repository directory:</p>
                <pre><code class="cmd-example" data-args="123"></code></pre>

                <h3>Review a PR by URL</h3>
                <p>From anywhere, using a full GitHub or Graphite URL:</p>
                <pre><code class="cmd-example" data-args="https://github.com/owner/repo/pull/123"></code></pre>

                <h3>Review Local Changes</h3>
                <p>Review your uncommitted changes in the current repository before creating a PR:</p>
                <pre><code class="cmd-example" data-args="--local [path]"></code></pre>
                <p>This is useful for getting AI feedback on your changes before committing or opening a pull request.</p>

                <h3>Configuration (Optional)</h3>
                <p>To integrate with GitHub, set your token in <code>~/.pair-review/config.json</code>:</p>
                <pre><code>{
  "github_token": "your_github_token_here",
  "port": 7247,
  "theme": "light"
}</code></pre>
                <p>Create a <a href="https://github.com/settings/tokens/new" target="_blank" rel="noopener" style="color: var(--color-text-link);">GitHub Personal Access Token</a> with the following scopes:</p>
                <ul style="margin: 0.5em 0; padding-left: 1.5em;">
                    <li><code>repo</code> &mdash; required for private repositories</li>
                    <li><code>public_repo</code> &mdash; sufficient for public repositories only</li>
                </ul>
                <p style="margin-top: 0.5em;">You can also provide the token via the <code>GITHUB_TOKEN</code> environment variable, which takes precedence over the config file.</p>
            </div>
        </div>
    </div>

    <script src="/js/index.js"></script>
</body>
</html>
