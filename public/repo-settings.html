<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <script>
        // Initialize theme immediately to prevent flash
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repository Settings - Pair Review</title>
    <link rel="icon" type="image/svg+xml" href="/icon.svg">
    <link rel="stylesheet" href="/css/pr.css">
    <link rel="stylesheet" href="/css/repo-settings.css">
</head>
<body>
    <!-- Main Container -->
    <div class="settings-page" id="settings-page">
        <!-- Top Navigation Bar -->
        <header class="settings-nav">
            <div class="nav-content">
                <a href="/" class="nav-logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="24" height="24">
                        <path transform="rotate(-50 12 12)" d="M18.178 8c5.096 0 5.096 8 0 8-5.095 0-7.133-8-12.356-8-5.096 0-5.096 8 0 8 5.223 0 7.26-8 12.356-8z"/>
                    </svg>
                    <span class="logo-text">pair<strong>review</strong></span>
                </a>
                <nav class="breadcrumb" aria-label="Breadcrumb">
                    <ol>
                        <li><a href="/">Repositories</a></li>
                        <li class="separator">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"/>
                            </svg>
                        </li>
                        <li><span id="repo-name-breadcrumb">Loading...</span></li>
                        <li class="separator">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"/>
                            </svg>
                        </li>
                        <li class="current" aria-current="page">Settings</li>
                    </ol>
                </nav>
                <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
                    <svg class="sun-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="settings-main">
            <div class="settings-container">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="header-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </div>
                    <div class="header-text">
                        <h1>Repository Settings</h1>
                        <p class="header-subtitle">
                            Configure default AI analysis settings for
                            <span class="repo-name" id="repo-name-header">loading...</span>
                        </p>
                    </div>
                </div>

                <!-- Settings Form -->
                <form class="settings-form" id="settings-form">
                    <!-- Default Model Section -->
                    <section class="settings-section">
                        <div class="section-header">
                            <h2>
                                <span class="section-icon">ü§ñ</span>
                                Default Model
                            </h2>
                            <p class="section-description">
                                This model will be pre-selected when starting analysis on any PR in this repository.
                            </p>
                        </div>
                        <div class="model-cards" id="model-cards">
                            <button type="button" class="model-card" data-model="haiku">
                                <div class="model-badge badge-speed">Fastest</div>
                                <div class="model-icon">‚ö°</div>
                                <div class="model-info">
                                    <span class="model-name">Haiku</span>
                                    <span class="model-tagline">Lightning Fast</span>
                                </div>
                                <p class="model-description">Quick analysis for simple changes</p>
                                <div class="model-selected-indicator">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
                                    </svg>
                                </div>
                            </button>
                            <button type="button" class="model-card" data-model="sonnet">
                                <div class="model-badge badge-recommended">Recommended</div>
                                <div class="model-icon">‚ú¶</div>
                                <div class="model-info">
                                    <span class="model-name">Sonnet</span>
                                    <span class="model-tagline">Best Balance</span>
                                </div>
                                <p class="model-description">Recommended for most reviews</p>
                                <div class="model-selected-indicator">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
                                    </svg>
                                </div>
                            </button>
                            <button type="button" class="model-card" data-model="opus">
                                <div class="model-badge badge-power">Most Thorough</div>
                                <div class="model-icon">‚óÜ</div>
                                <div class="model-info">
                                    <span class="model-name">Opus</span>
                                    <span class="model-tagline">Most Capable</span>
                                </div>
                                <p class="model-description">Deep analysis for complex code</p>
                                <div class="model-selected-indicator">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
                                    </svg>
                                </div>
                            </button>
                        </div>
                        <p class="model-hint">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"/>
                            </svg>
                            Users can still override this choice when starting each analysis.
                        </p>
                    </section>

                    <!-- Default Instructions Section -->
                    <section class="settings-section">
                        <div class="section-header">
                            <h2>
                                <span class="section-icon">üìù</span>
                                Default Instructions
                            </h2>
                            <p class="section-description">
                                These instructions will be automatically included in every AI analysis for this repository.
                                Use this for project-specific guidelines, coding standards, or focus areas.
                            </p>
                        </div>
                        <div class="instructions-wrapper">
                            <textarea
                                id="default-instructions"
                                name="default_instructions"
                                class="instructions-textarea"
                                placeholder="Enter default instructions for AI reviews...

Examples:
‚Ä¢ This project uses TypeScript strict mode - flag any type safety issues
‚Ä¢ Focus on security vulnerabilities, especially in authentication code
‚Ä¢ Our API follows REST conventions - check for consistency
‚Ä¢ Performance is critical - look for N+1 queries and memory leaks
‚Ä¢ We use React hooks - watch for missing dependencies"
                                rows="8"
                            ></textarea>
                            <div class="textarea-footer">
                                <span class="char-count"><span id="char-count">0</span> characters</span>
                                <span class="textarea-hint">Markdown supported</span>
                            </div>
                        </div>
                    </section>

                    <!-- Danger Zone -->
                    <section class="settings-section danger-zone">
                        <div class="section-header">
                            <h2>
                                <span class="section-icon">‚ö†Ô∏è</span>
                                Reset Settings
                            </h2>
                            <p class="section-description">
                                Clear all custom settings for this repository and return to defaults.
                            </p>
                        </div>
                        <button type="button" class="btn btn-danger-outline" id="reset-settings">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M5.75 1a.75.75 0 00-.75.75v.258a33.64 33.64 0 00-2.979.652.75.75 0 00.398 1.446 32.12 32.12 0 012.128-.506c.157.608.352 1.194.586 1.756a.75.75 0 101.38-.586 14.04 14.04 0 01-.462-1.39A32.125 32.125 0 0112.75 2.25c.251 0 .499.008.745.024-.085.472-.155.953-.207 1.441a.75.75 0 101.494.129 16.03 16.03 0 01.247-1.773c.267.06.528.125.782.196a.75.75 0 00.398-1.446A33.64 33.64 0 0013.25.258V.75a.75.75 0 00-1.5 0v.26A33.793 33.793 0 008 .75c-1.28 0-2.531.094-3.75.26V.75A.75.75 0 005.75 1z"/>
                                <path d="M5.415 4.949a.75.75 0 10-1.39.586c.298.714.667 1.388 1.093 2.007a.75.75 0 10 1.245-.842 12.565 12.565 0 01-.948-1.751zM7.25 8.75a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5a.75.75 0 01-.75-.75z"/>
                                <path fill-rule="evenodd" d="M8 14.5a6.5 6.5 0 100-13 6.5 6.5 0 000 13zM8 16A8 8 0 108 0a8 8 0 000 16z"/>
                            </svg>
                            Reset to Defaults
                        </button>
                    </section>
                </form>
            </div>
        </main>

        <!-- Floating Action Bar -->
        <div class="action-bar" id="action-bar">
            <div class="action-bar-content">
                <div class="unsaved-indicator" id="unsaved-indicator">
                    <span class="dot"></span>
                    <span>Unsaved changes</span>
                </div>
                <div class="action-buttons">
                    <button type="button" class="btn btn-secondary" id="cancel-btn">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary btn-save" id="save-btn" form="settings-form">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
                        </svg>
                        Save Settings
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- JavaScript -->
    <script src="/js/repo-settings.js"></script>
</body>
</html>
