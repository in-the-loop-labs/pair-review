{"id":"pair_review-0ed","title":"Persist side panel expanded/collapsed state in localStorage","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T17:33:11.400722-05:00","updated_at":"2025-12-31T17:53:53.039731-05:00","closed_at":"2025-12-31T17:53:53.039731-05:00"}
{"id":"pair_review-0fh","title":"Remove worktree_path from pr_data JSON","description":"Worktree path is stored in both worktrees table and pr_data JSON. Remove duplication - worktrees table is source of truth.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T09:20:02.446966-05:00","updated_at":"2025-12-29T09:20:02.446966-05:00"}
{"id":"pair_review-0l0","title":"UI: Repo settings page for default instructions","description":"Create a settings page for each repo where users can configure default analysis instructions. These instructions will apply to all PRs in the repo unless overridden by PR-specific instructions. Page should have a form with textarea for instructions and save functionality.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T18:26:07.266194-05:00","updated_at":"2025-12-31T18:26:07.266194-05:00","dependencies":[{"issue_id":"pair_review-0l0","depends_on_id":"pair_review-f8b","type":"blocks","created_at":"2025-12-31T18:26:22.38828-05:00","created_by":"daemon"},{"issue_id":"pair_review-0l0","depends_on_id":"pair_review-3o2","type":"blocks","created_at":"2025-12-31T18:26:24.687176-05:00","created_by":"daemon"}]}
{"id":"pair_review-0oj","title":"Auto-cleanup stale worktrees on server start","description":"## Problem\nWorktrees accumulate on disk and are never cleaned up automatically.\n\n## Solution\nOn server startup, asynchronously clean up worktrees not accessed within retention period.\n\n## Implementation\n1. Add config option: `worktree_retention_days` (default: 7)\n2. Add `WorktreeManager.cleanupStaleWorktrees()` method:\n   - Query DB for worktrees where `last_accessed_at \u003c (now - retention_days)`\n   - For each stale worktree:\n     - Run `git worktree remove --force {path}`\n     - Delete directory if remove fails\n     - Delete DB record\n   - Log to console: \"Cleaned up N stale worktrees\"\n3. Call cleanup async after server starts (don't block startup)\n4. Add `git worktree prune` call to clean orphaned registrations\n\n## Logging\n- Console log only (silent to user)\n- Format: `[pair-review] Cleaned up 3 stale worktrees (older than 7 days)`\n\n## Dependencies\n- Requires worktrees database table (pair_review-452)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:56:21.67418-05:00","updated_at":"2025-12-28T16:29:09.862917-05:00","closed_at":"2025-12-28T16:29:09.862917-05:00","dependencies":[{"issue_id":"pair_review-0oj","depends_on_id":"pair_review-452","type":"blocks","created_at":"2025-12-28T15:56:34.986646-05:00","created_by":"daemon"},{"issue_id":"pair_review-0oj","depends_on_id":"pair_review-e4k","type":"blocks","created_at":"2025-12-28T15:56:43.516493-05:00","created_by":"daemon"}]}
{"id":"pair_review-11e","title":"Praise suggestions: Style with purple theme","description":"Update praise/positive suggestions to match prototype:\n- Purple left border instead of amber\n- Star icon\n- 'Nice Work' label instead of type badge\n- Purple-tinted gradient header\nFiles: public/js/pr.js, public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:40.853145-05:00","updated_at":"2025-12-30T21:47:11.773098-05:00","closed_at":"2025-12-30T21:47:11.773098-05:00","dependencies":[{"issue_id":"pair_review-11e","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:05:05.479866-05:00","created_by":"daemon"}]}
{"id":"pair_review-11v","title":"AI suggestions sidebar disappears when empty","description":"this may be fixed by other issues, but this sidebar should never entirely disappear. It makes viewing level-specific suggestions invisible","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T09:19:20.418582-05:00","updated_at":"2025-12-27T09:19:20.418582-05:00"}
{"id":"pair_review-13b","title":"when adopting AI suggestions do not remove from sidebar","description":"instead of removing there should be some other visual indication instead, such as the entry being all gray or otherwise de-emphasized in some way -- but not entirely removed. this suggestions are still present in the diff, but collapsed, so it should still be possible to navigate to them","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T09:02:19.696331-05:00","updated_at":"2025-12-28T08:14:38.828974-05:00","closed_at":"2025-12-28T08:14:38.828974-05:00"}
{"id":"pair_review-1mp","title":"Epic: Implement Design Refresh UI","description":"Migrate the current application UI to match the design-refresh prototype. This involves updating CSS styling, HTML structure, and JavaScript components to achieve visual parity with the prototype at design-refresh/index.html.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T21:03:47.98069-05:00","updated_at":"2025-12-30T21:47:21.622644-05:00","closed_at":"2025-12-30T21:47:21.622644-05:00"}
{"id":"pair_review-1w0","title":"AI suggestions: Add level indicator dots","description":"Add analysis level indicator to suggestion headers showing Line/File/Architecture levels:\n- 3 dots in header right side\n- Active dot highlighted in amber\n- Label text showing analysis type (e.g., 'LINE ANALYSIS')\n- Match prototype .ai-suggestion-level styling\nFiles: public/js/pr.js, public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:32.341948-05:00","updated_at":"2025-12-30T21:47:11.764909-05:00","closed_at":"2025-12-30T21:47:11.764909-05:00","dependencies":[{"issue_id":"pair_review-1w0","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:04:56.174238-05:00","created_by":"daemon"}]}
{"id":"pair_review-38y","title":"URL input field should be much wider","description":"The URL input field on the landing page is still too narrow. It should be approximately 3 times its current width to properly accommodate GitHub PR URLs without truncation.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T08:05:31.540895-05:00","updated_at":"2025-12-29T08:28:12.108173-05:00","closed_at":"2025-12-29T08:28:12.108173-05:00","dependencies":[{"issue_id":"pair_review-38y","depends_on_id":"pair_review-jbp","type":"blocks","created_at":"2025-12-29T08:05:54.642524-05:00","created_by":"daemon"}]}
{"id":"pair_review-3ig","title":"Consolidate comment buttons into split button","description":"## Problem\nThe PR header has 3 comment-related buttons that clutter the UI:\n- Preview Comments\n- Clear Comments  \n- N comments (Submit Review)\n\n## Solution\nReplace with a single **split button** pattern:\n\n```\n┌──────────────────┬───┐\n│   2 comments     │ ▾ │  ← Two click targets\n└──────────────────┴───┘\n        ↓            ↓\n   Primary       Dropdown\n   Action        Menu\n```\n\n### Behavior\n- **Click main area** → executes configurable primary action (Submit Review or Preview)\n- **Click dropdown arrow** → shows menu with all options:\n  ```\n  ┌─────────────────┐\n  │ ✓ Submit Review │  ← checkmark shows current default\n  │   Preview       │\n  │ ───────────────│\n  │   Clear All     │\n  └─────────────────┘\n  ```\n\n### Configuration\nAdd to `~/.pair-review/config.json`:\n```json\n{\n  \"comment_button_action\": \"submit\"  // or \"preview\"\n}\n```\n\nDefault: \"submit\" (most users want quick submission)\n\n### Implementation Details\n\n1. **Create SplitButton component** (`public/js/components/SplitButton.js`)\n   - Renders button with main area + dropdown arrow\n   - Handles click events for both targets\n   - Manages dropdown open/close state\n   - Closes dropdown on outside click\n\n2. **Update pr.js header rendering** (around line 468)\n   - Remove: Preview Comments, Clear Comments, N comments buttons\n   - Add: Single split button instance\n   - Wire up actions: openPreviewModal(), clearAllUserComments(), openReviewModal()\n\n3. **Add API endpoint** for config\n   - GET `/api/config` - returns user config including comment_button_action\n   - Already may exist, just need to add new field\n\n4. **CSS styling** (`public/css/pr.css`)\n   - Split button styling matching existing btn-primary/green style\n   - Dropdown menu styling\n   - Checkmark indicator for current default\n   - Separator line before Clear All (destructive action)\n\n### Files to modify\n- `public/js/components/SplitButton.js` (new)\n- `public/js/pr.js` (header buttons ~line 468, updateCommentCount)\n- `public/css/pr.css` (split button styles)\n- `src/server.js` or config handler (if config endpoint needs update)\n\n### Reference\nSimilar patterns:\n- VS Code Run button with debug config dropdown\n- GitHub \"Merge pull request\" dropdown\n- Chrome download button","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T13:01:15.891622-05:00","updated_at":"2025-12-28T13:22:01.510553-05:00","closed_at":"2025-12-28T13:22:01.510553-05:00"}
{"id":"pair_review-3o2","title":"DB schema: Repo settings table for persistent configuration","description":"Create new database table to store per-repo settings including default analysis instructions. Table should key off repo identifier (owner/repo) and support future extension for other repo-level settings.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T18:26:05.864283-05:00","updated_at":"2025-12-31T18:26:05.864283-05:00","dependencies":[{"issue_id":"pair_review-3o2","depends_on_id":"pair_review-f8b","type":"blocks","created_at":"2025-12-31T18:26:22.344443-05:00","created_by":"daemon"}]}
{"id":"pair_review-3ru","title":"Middle panel sizing incorrect on initial load until AI panel toggled","description":"The diff view middle panel doesn't size correctly on initial page load. Toggling the AI panel causes a recalculation that fixes it. Fixed by changing flex: 1 to flex: 1 1 0 on .diff-view to force flex-basis: 0 calculation.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T09:01:55.60817-05:00","updated_at":"2025-12-31T09:02:02.512319-05:00","closed_at":"2025-12-31T09:02:02.512319-05:00"}
{"id":"pair_review-3ur","title":"UI: Add navigation for user comments like AI suggestions","description":"Add a navigator component for user comments similar to the existing AI suggestion navigator. Currently users must scroll through the diff to find their comments, or use the preview panel which only shows text without edit capability.\n\nDesired functionality:\n- List of user comments with ability to jump to each one in the diff\n- Edit capability from the navigator (or quick jump to edit in place)\n- Visual indicator of comment count\n- Possibly filter/sort options (by file, by status if we add draft/submitted states)\n\nCould potentially unify with or mirror the AI suggestion navigator pattern for consistency.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-31T21:26:43.921839-05:00","updated_at":"2025-12-31T21:26:43.921839-05:00"}
{"id":"pair_review-41r","title":"Separate index.html and pr.html pages","description":"Currently the landing page and PR review page share index.html, which causes issues with elements appearing where they shouldn't. These should be separate HTML files:\n\n- index.html: Landing page with URL input and recent reviews\n- pr.html: PR review page with diff view, sidebars, etc.\n\nThis is a cleaner architecture that avoids CSS/JS conflicts and show/hide logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T08:05:33.62306-05:00","updated_at":"2025-12-29T08:26:46.101998-05:00","closed_at":"2025-12-29T08:26:46.101998-05:00","dependencies":[{"issue_id":"pair_review-41r","depends_on_id":"pair_review-jbp","type":"blocks","created_at":"2025-12-29T08:05:54.686022-05:00","created_by":"daemon"}]}
{"id":"pair_review-452","title":"Add dedicated worktrees database table","description":"## Problem\nWorktree paths are currently stored in `pr_metadata.pr_data` JSON blob. This makes queries for cleanup, recently-used lists, and tracking difficult.\n\n## Solution\nCreate a dedicated `worktrees` table:\n\n```sql\nCREATE TABLE worktrees (\n  id TEXT PRIMARY KEY,           -- Random ID (like beads naming)\n  pr_number INTEGER NOT NULL,\n  repository TEXT NOT NULL,      -- owner/repo format\n  branch TEXT NOT NULL,          -- PR head branch\n  path TEXT NOT NULL,            -- Full filesystem path\n  created_at TEXT NOT NULL,      -- ISO timestamp\n  last_accessed_at TEXT NOT NULL,-- ISO timestamp, updated on each use\n  UNIQUE(pr_number, repository)\n);\n\nCREATE INDEX idx_worktrees_last_accessed ON worktrees(last_accessed_at);\nCREATE INDEX idx_worktrees_repo ON worktrees(repository);\n```\n\n## Implementation\n1. Add table creation to `src/database.js`\n2. Add migration logic to handle existing worktrees (scan directory, populate table)\n3. Create WorktreeRepository class with CRUD methods:\n   - `create(prInfo)` → returns worktree record\n   - `findByPR(prNumber, repository)` → returns worktree or null\n   - `updateLastAccessed(id)` → touches last_accessed_at\n   - `findStale(olderThan)` → returns worktrees not accessed since date\n   - `delete(id)` → removes record\n   - `listRecent(limit)` → returns recently accessed worktrees\n\n## Notes\n- Keep `pr_metadata.pr_data` blob for backward compat but stop writing worktree_path there\n- Random ID generation should match beads style (alphanumeric, ~6 chars)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:55:47.036368-05:00","updated_at":"2025-12-28T16:08:29.231282-05:00","closed_at":"2025-12-28T16:08:29.231282-05:00","dependencies":[{"issue_id":"pair_review-452","depends_on_id":"pair_review-e4k","type":"blocks","created_at":"2025-12-28T15:56:43.415803-05:00","created_by":"daemon"}]}
{"id":"pair_review-4a5","title":"Update GitHub client to use line/side/commit_id API","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T21:40:15.535398-05:00","updated_at":"2025-12-31T21:43:49.084277-05:00","closed_at":"2025-12-31T21:43:49.084277-05:00","dependencies":[{"issue_id":"pair_review-4a5","depends_on_id":"pair_review-f3v","type":"blocks","created_at":"2025-12-31T21:40:23.053043-05:00","created_by":"daemon"}]}
{"id":"pair_review-4k0","title":"Use random IDs for worktree directory names","description":"## Problem\nCurrent naming `{owner}-{repo}-{number}` is predictable and suggests these directories are for user access. They should be for application use only.\n\n## Solution\nUse random alphanumeric IDs (like beads issue naming) for worktree directories:\n- Before: `~/.pair-review/worktrees/anthropic-pair-review-123`\n- After: `~/.pair-review/worktrees/x7k` or `~/.pair-review/worktrees/a3m9p`\n\n## Implementation\n1. Update `WorktreeManager.createWorktreeForPR()` to:\n   - Generate random ID (6 alphanumeric chars)\n   - Use ID as directory name\n   - Store mapping in worktrees table\n2. Update `getWorktreePath()` to look up path from DB by PR info\n3. Remove any logic that derives path from PR number\n\n## Dependencies\n- Requires worktrees database table (pair_review-452)\n\n## Migration\n- Existing worktrees can be renamed or left as-is until cleanup\n- New worktrees use random naming immediately","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:56:20.310439-05:00","updated_at":"2025-12-28T16:19:15.852915-05:00","closed_at":"2025-12-28T16:19:15.852915-05:00","dependencies":[{"issue_id":"pair_review-4k0","depends_on_id":"pair_review-452","type":"blocks","created_at":"2025-12-28T15:56:34.943059-05:00","created_by":"daemon"},{"issue_id":"pair_review-4k0","depends_on_id":"pair_review-e4k","type":"blocks","created_at":"2025-12-28T15:56:43.462161-05:00","created_by":"daemon"}]}
{"id":"pair_review-4ui","title":"Future: Reply to AI suggestions as iterative feedback","description":"Allow users to reply to individual AI suggestions. These replies would be stored and incorporated as additional context/instructions when re-running analysis. This creates a conversational feedback loop where the AI can refine its suggestions based on reviewer feedback. Example: User replies 'This pattern is intentional for performance reasons' to a suggestion, and future analysis rounds consider this context. Depends on the custom instructions infrastructure being in place first.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-31T18:35:58.447329-05:00","updated_at":"2025-12-31T18:36:13.15488-05:00","dependencies":[{"issue_id":"pair_review-4ui","depends_on_id":"pair_review-f8b","type":"blocks","created_at":"2025-12-31T18:36:06.752312-05:00","created_by":"daemon"},{"issue_id":"pair_review-4ui","depends_on_id":"pair_review-jlp","type":"blocks","created_at":"2025-12-31T18:36:06.783365-05:00","created_by":"daemon"}]}
{"id":"pair_review-4z8","title":"Page over-scrolls leaving white region at bottom","description":"The PR review page allows scrolling beyond the content, revealing a white/blank region at the bottom of the viewport. This suggests a CSS layout issue - likely the body/container height is not properly constrained to the viewport, or there's extra margin/padding causing content to extend beyond what's visible.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T08:23:34.0589-05:00","updated_at":"2025-12-31T08:24:45.683937-05:00","closed_at":"2025-12-31T08:24:45.683937-05:00"}
{"id":"pair_review-5vi","title":"CLI should open PR page directly, not landing page","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T08:35:36.782001-05:00","updated_at":"2025-12-29T08:37:31.598826-05:00","closed_at":"2025-12-29T08:37:31.598826-05:00"}
{"id":"pair_review-6qg","title":"Navigation: Add link to repo settings from PR view","description":"Add a navigation element (link or button) in the PR view that allows users to access the repo settings page. Consider placement in header or sidebar where it's discoverable but not intrusive.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T18:26:08.17695-05:00","updated_at":"2025-12-31T18:26:08.17695-05:00","dependencies":[{"issue_id":"pair_review-6qg","depends_on_id":"pair_review-f8b","type":"blocks","created_at":"2025-12-31T18:26:22.436209-05:00","created_by":"daemon"},{"issue_id":"pair_review-6qg","depends_on_id":"pair_review-0l0","type":"blocks","created_at":"2025-12-31T18:26:25.683573-05:00","created_by":"daemon"}]}
{"id":"pair_review-7g5","title":"AI suggestions: Remove confidence percentage display","description":"The prototype does not show confidence percentages on suggestions. Remove or hide the confidence display from AI suggestion cards to match the cleaner prototype design.\nFiles: public/js/pr.js, public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:33.596219-05:00","updated_at":"2025-12-30T21:46:02.341721-05:00","closed_at":"2025-12-30T21:46:02.341721-05:00","dependencies":[{"issue_id":"pair_review-7g5","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:04:58.555494-05:00","created_by":"daemon"}]}
{"id":"pair_review-8p6","title":"Fix hidden suggestion expansion performance and edge cases","description":"Address feedback: 1) O(n*m) performance issue - build visible line lookup map, 2) Extract file element lookup helper, 3) Create getLineNumber helper, 4) Handle line ranges (lineEnd), 5) Add better debugging, 6) Filter suggestions on unmodified files in orchestration","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T18:34:37.038953-05:00","updated_at":"2025-12-31T18:37:25.669766-05:00","closed_at":"2025-12-31T18:37:25.669766-05:00"}
{"id":"pair_review-8t9","title":"Add subtle grid background pattern","description":"Add the subtle grid pattern overlay from the prototype design:\n- Applied to body::before pseudo-element\n- 24px grid size\n- Very subtle white lines (rgba(255,255,255,0.01))\n- pointer-events: none, z-index: 0\nFiles: public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:36.397859-05:00","updated_at":"2025-12-30T21:46:02.363131-05:00","closed_at":"2025-12-30T21:46:02.363131-05:00","dependencies":[{"issue_id":"pair_review-8t9","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:05:01.606341-05:00","created_by":"daemon"}]}
{"id":"pair_review-9rj","title":"Worktree delete uses parseInt on TEXT id","description":"The delete endpoint does parseInt(req.params.id) but worktree IDs are TEXT (alphanumeric strings like 'x2z'), causing parseInt to return NaN","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T09:19:51.428113-05:00","updated_at":"2025-12-29T09:21:54.731385-05:00","closed_at":"2025-12-29T09:21:54.731385-05:00"}
{"id":"pair_review-9tw","title":"add syntax high-lighting","description":"Use a library to do this","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T08:51:02.674219-05:00","updated_at":"2025-12-28T11:47:37.398279-05:00","closed_at":"2025-12-28T11:47:37.398279-05:00"}
{"id":"pair_review-a39","title":"AI Panel: Style depth level checkmarks","description":"Update analysis depth indicators in AI panel:\n- Complete levels show green checkmark icon in green-tinted box\n- Active level shows pulsing amber dot\n- Pending levels show gray circle\n- Use .depth-level-complete class styling from prototype\nFiles: public/css/pr.css, public/js/components/AIPanel.js","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:37.591808-05:00","updated_at":"2025-12-30T21:47:11.779885-05:00","closed_at":"2025-12-30T21:47:11.779885-05:00","dependencies":[{"issue_id":"pair_review-a39","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:05:02.438283-05:00","created_by":"daemon"}]}
{"id":"pair_review-a4d","title":"Wrap long lines","description":"the github UI wraps long lines in the diff display. pair-review should do the same. When a line is wrapped, no line number is shown in the gutter. This must be handled correctly for line selection for commenting, etc.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T08:47:22.374732-05:00","updated_at":"2025-12-27T09:42:46.785704-05:00","closed_at":"2025-12-27T09:42:46.785704-05:00"}
{"id":"pair_review-ae9","title":"start review from web UI","description":"should be able to paste in a PR URL and have the running UI create workspace to view diff; maybe optionally start the AI review though that could be a separate step for simplicity","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T08:26:05.337455-05:00","updated_at":"2025-12-28T16:45:39.805603-05:00","closed_at":"2025-12-28T16:45:39.805603-05:00","dependencies":[{"issue_id":"pair_review-ae9","depends_on_id":"pair_review-e4k","type":"blocks","created_at":"2025-12-28T15:56:43.559511-05:00","created_by":"daemon"}]}
{"id":"pair_review-ana","title":"AI suggestions: Update action button styling","description":"Update suggestion action buttons to match prototype:\n- Adopt: green background (#3fb950), white text, checkmark icon\n- Edit: gray background with border, pencil icon\n- Dismiss: transparent, gray text turns red on hover, X icon\n- All buttons should have icons before text\nFiles: public/js/pr.js, public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:34.579838-05:00","updated_at":"2025-12-30T21:46:02.348945-05:00","closed_at":"2025-12-30T21:46:02.348945-05:00","dependencies":[{"issue_id":"pair_review-ana","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:04:59.720866-05:00","created_by":"daemon"}]}
{"id":"pair_review-b2b","title":"Delete worktree button does nothing on landing page","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T08:35:37.783385-05:00","updated_at":"2025-12-29T08:37:31.599907-05:00","closed_at":"2025-12-29T08:37:31.599907-05:00"}
{"id":"pair_review-b8y","title":"Hide AI sidebar on landing page","description":"The collapsed AI suggestions sidebar still appears on the landing/index page when no PR is displayed. It should only be visible on PR review pages.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T08:05:32.534182-05:00","updated_at":"2025-12-29T08:26:47.275132-05:00","closed_at":"2025-12-29T08:26:47.275132-05:00","dependencies":[{"issue_id":"pair_review-b8y","depends_on_id":"pair_review-jbp","type":"blocks","created_at":"2025-12-29T08:05:54.665252-05:00","created_by":"daemon"}]}
{"id":"pair_review-bcd","title":"File tree: Group files by directory","description":"Update file tree sidebar to group files by parent directory like prototype:\n- Show folder icons with directory names as group headers\n- Files indented under their directory group\n- Collapsible groups (optional)\nFiles: public/js/pr.js, public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:35.391898-05:00","updated_at":"2025-12-30T21:46:02.356366-05:00","closed_at":"2025-12-30T21:46:02.356366-05:00","dependencies":[{"issue_id":"pair_review-bcd","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:05:00.508286-05:00","created_by":"daemon"}]}
{"id":"pair_review-cre","title":"AI sidebar navigation jumps to wrong suggestion after dismissing","description":"## Problem\nNavigation to suggestions from the AI sidebar sometimes moves to the wrong location in the code -- the location of a different suggestion.\n\n## Reproduction\n1. Have multiple AI suggestions displayed\n2. Dismiss one or more suggestions\n3. Click on a remaining suggestion in the AI sidebar\n4. Observe that navigation goes to the wrong code location\n\n## Root Cause Hypothesis\nThe AI panel appears to be using the index of non-dismissed suggestions in the UI rather than pulling navigation information directly from the entry that the user interacts with.\n\n## Expected Behavior\nClicking on a suggestion in the AI sidebar should navigate to that specific suggestion's location, regardless of which other suggestions have been dismissed.\n\n## Fix Approach\nThe click handler should extract file/line information from the clicked element's data attributes (data-file, data-line) rather than relying on array indices that may become stale after dismissals.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T16:27:10.075569-05:00","updated_at":"2025-12-31T16:43:40.592655-05:00","closed_at":"2025-12-31T16:43:40.592655-05:00"}
{"id":"pair_review-ctt","title":"Deleted line comment highlights multiple deleted lines incorrectly","description":"When clicking to comment on a deleted line, not just that line but other deleted lines also get highlighted. The selection/highlighting logic appears to be incorrectly selecting multiple lines when only one deleted line is clicked.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-01T08:49:49.517433-05:00","updated_at":"2026-01-01T08:49:49.517433-05:00"}
{"id":"pair_review-cu8","title":"diff display should use more of full window width when sidebars are collapsed","description":"This should be more like gitHub in terms of using most of the window width","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T08:49:47.191183-05:00","updated_at":"2025-12-27T10:24:50.951641-05:00","closed_at":"2025-12-27T10:24:50.951641-05:00"}
{"id":"pair_review-d7n","title":"AI suggestions for lines that are not visible","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T08:46:08.631773-05:00","updated_at":"2025-12-31T20:39:48.812705-05:00","closed_at":"2025-12-31T20:39:48.812705-05:00"}
{"id":"pair_review-dam","title":"UI: Capture custom instructions before PR analysis","description":"Add textarea/input field in the PR view that allows users to specify custom instructions before triggering AI analysis. Instructions should indicate what aspects to focus on. When re-running analysis, show previous instructions so user can reuse or modify them.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T18:26:04.776209-05:00","updated_at":"2025-12-31T18:26:04.776209-05:00","dependencies":[{"issue_id":"pair_review-dam","depends_on_id":"pair_review-f8b","type":"blocks","created_at":"2025-12-31T18:26:22.300484-05:00","created_by":"daemon"},{"issue_id":"pair_review-dam","depends_on_id":"pair_review-fvd","type":"blocks","created_at":"2025-12-31T18:26:23.732922-05:00","created_by":"daemon"}]}
{"id":"pair_review-e4k","title":"Worktree management","description":"## Overview\nImprove how pair-review manages git worktrees for PR reviews. Currently worktrees are created with predictable names, never cleaned up, and recreated on each use.\n\n## Goals\n1. **Dedicated database tracking** - Move from JSON blob storage to proper `worktrees` table\n2. **Random naming** - Use DB-driven random IDs instead of `{owner}-{repo}-{number}` to indicate these are for app use only\n3. **Worktree reuse** - Refresh existing worktrees instead of recreating; error if local changes exist\n4. **Auto-cleanup** - Clean up stale worktrees (default: 7 days) on server start, configurable retention\n5. **Recent reviews UI** - Landing page shows recently reviewed PRs across all repos\n6. **Start from URL** - Create worktree from PR URL via web UI (existing issue ae9)\n\n## Sub-issues\n- **452**: Add dedicated worktrees database table (start here)\n- **4k0**: Use random IDs for worktree directory names\n- **k7u**: Reuse existing worktree when reopening same PR\n- **0oj**: Auto-cleanup stale worktrees on server start\n- **su1**: Add recently reviewed PRs list to landing page\n- **ae9**: Start review from web UI","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-27T09:14:28.91021-05:00","updated_at":"2025-12-28T16:45:41.212873-05:00","closed_at":"2025-12-28T16:45:41.212873-05:00"}
{"id":"pair_review-ebz","title":"Handle stale worktrees in recent reviews","description":"Old worktrees appear in recent reviews list but clicking them leads to 404 errors. Need to either: (1) validate worktree directories exist before showing them, (2) auto-cleanup stale entries on server start, or (3) add a cleanup command. Should not show non-functional entries to users.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T11:48:25.816735-05:00","updated_at":"2025-12-29T11:50:10.392035-05:00","closed_at":"2025-12-29T11:50:10.392035-05:00"}
{"id":"pair_review-ezw","title":"AI suggestion and user comment width should never be greater than diff display width","description":"This should be helped by wrapping long lines: pair_review-a4d","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T08:48:33.629798-05:00","updated_at":"2025-12-27T08:48:33.629798-05:00"}
{"id":"pair_review-f3v","title":"Update user-comment endpoint to accept commit_sha","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T21:40:14.556475-05:00","updated_at":"2025-12-31T21:43:49.080333-05:00","closed_at":"2025-12-31T21:43:49.080333-05:00","dependencies":[{"issue_id":"pair_review-f3v","depends_on_id":"pair_review-m3j","type":"blocks","created_at":"2025-12-31T21:40:23.020503-05:00","created_by":"daemon"}]}
{"id":"pair_review-f8b","title":"Customizable AI Analysis Configuration","description":"Epic for implementing user-configurable AI analysis settings. This allows users to customize how the AI reviewer behaves, what types of feedback it provides, and adjust analysis parameters to match their workflow and preferences.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-31T18:13:53.082846-05:00","updated_at":"2025-12-31T18:14:00.219549-05:00"}
{"id":"pair_review-fvd","title":"DB schema: Store custom instructions per analysis run","description":"Add field(s) to store user-provided custom instructions for each analysis run. Instructions should be associated with the analysis so they can be retrieved when re-running. Consider adding to existing reviews table or creating analysis_runs table.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T18:26:03.893778-05:00","updated_at":"2025-12-31T18:26:03.893778-05:00","dependencies":[{"issue_id":"pair_review-fvd","depends_on_id":"pair_review-f8b","type":"blocks","created_at":"2025-12-31T18:26:22.249111-05:00","created_by":"daemon"}]}
{"id":"pair_review-g7f","title":"Split src/routes/pr.js into focused route modules","description":"## Problem\nsrc/routes/pr.js has grown to 2600+ lines, making it difficult to navigate and maintain.\n\n## Solution\nSplit into focused route modules:\n- `routes/analysis.js` - AI analysis endpoints (/api/analyze/*)\n- `routes/worktrees.js` - Worktree management (/api/worktrees/*)  \n- `routes/comments.js` - Comment CRUD (/api/user-comment/*, /api/ai-suggestion/*)\n- `routes/pr.js` - Core PR data endpoints (/api/pr/*)\n\n## Implementation\n1. Create new route files with extracted endpoints\n2. Update src/server.js to mount the new routers\n3. Ensure shared utilities (like broadcastProgress, getModel) are properly shared\n4. Update any imports in tests\n\n## Notes\nShould be done alongside pair_review-rhh (codebase health epic)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T16:14:39.694292-05:00","updated_at":"2025-12-29T16:15:01.463497-05:00"}
{"id":"pair_review-gcg","title":"Middle panel allows horizontal scroll - suggestions overflow","description":"The diff view middle panel allows horizontal scrolling because suggestion cards and diff content overflow the panel width. Fixed by: 1) Adding overflow-x:hidden to diff-view and diff-container, 2) Adding min-width:0 to flex items, 3) Adding table-layout:fixed to diff table, 4) Adding word-wrap to suggestion body text","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T08:47:01.983503-05:00","updated_at":"2025-12-31T08:47:08.13078-05:00","closed_at":"2025-12-31T08:47:08.13078-05:00"}
{"id":"pair_review-hke","title":"Level 3 AI analysis may suggest non-existent file paths","description":"Level 3 (codebase context) AI analysis sometimes generates suggestions that reference file paths which don't exist in the PR diff. This causes the suggestions to appear in the navigator but not inline with the code, as there's no matching file to attach them to.\n\nRoot causes to investigate:\n1. AI may be hallucinating file paths based on codebase patterns\n2. AI may be referencing files that exist in the repo but aren't in the PR\n3. Path normalization issues between AI output and diff file names\n\nPotential solutions:\n1. Validate file paths against diff contents before storing suggestions\n2. Provide explicit list of valid file paths to the AI context\n3. Add fuzzy matching to find closest valid file path\n4. Filter out suggestions for non-existent files at the API level","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-31T21:19:27.114635-05:00","updated_at":"2025-12-31T21:19:37.093722-05:00"}
{"id":"pair_review-igp","title":"Respect .gitattributes linguist-generated files","description":"Files marked with linguist-generated=true in .gitattributes (like package-lock.json, generated code) should be hidden or collapsed by default in the diff view, similar to how GitHub handles them.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T11:31:05.970149-05:00","updated_at":"2025-12-29T16:58:42.365511-05:00","closed_at":"2025-12-29T16:58:42.365511-05:00"}
{"id":"pair_review-jbp","title":"Landing page polish","description":"Collection of UI/UX improvements for the landing page to achieve professional quality.\n\n## Issues\n- 38y: URL input field width\n- b8y: Hide AI sidebar on landing page  \n- 41r: Separate index.html and pr.html pages\n- v7u: Repository name styling","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-29T08:05:45.924775-05:00","updated_at":"2025-12-29T08:28:21.591188-05:00","closed_at":"2025-12-29T08:28:21.591188-05:00"}
{"id":"pair_review-jlp","title":"Analyzer: Integrate custom instructions into AI prompts","description":"Modify the AI analyzer prompts to incorporate both PR-level and repo-level custom instructions. Both should be sent to the AI with clear indication that PR instructions take priority over repo instructions when there's conflict. Use supplement model - combine both instruction sets. Use whatever instructions are available (repo only, PR only, or both).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T18:26:09.356792-05:00","updated_at":"2025-12-31T18:26:09.356792-05:00","dependencies":[{"issue_id":"pair_review-jlp","depends_on_id":"pair_review-f8b","type":"blocks","created_at":"2025-12-31T18:26:22.460341-05:00","created_by":"daemon"},{"issue_id":"pair_review-jlp","depends_on_id":"pair_review-fvd","type":"blocks","created_at":"2025-12-31T18:26:26.812915-05:00","created_by":"daemon"},{"issue_id":"pair_review-jlp","depends_on_id":"pair_review-3o2","type":"blocks","created_at":"2025-12-31T18:26:26.843132-05:00","created_by":"daemon"}]}
{"id":"pair_review-jmu","title":"Cmd+Enter should save when creating a user comment","description":"Add keyboard shortcut support so users can press Cmd+Enter (Mac) or Ctrl+Enter (Windows/Linux) to save a comment instead of clicking the save button","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-31T18:23:25.099236-05:00","updated_at":"2025-12-31T18:23:25.099236-05:00"}
{"id":"pair_review-jq0","title":"Adopted AI suggestions disappear from AI panel after browser refresh","description":"## Problem\nAdopted AI suggestions are handled incorrectly when the browser is refreshed.\n\n## Current Behavior\nAfter adopting an AI suggestion and refreshing the browser:\n1. The adopted suggestion no longer appears in the AI panel\n2. The suggestion appears TWICE as user comments:\n   - The adopted user comment (correct)\n   - The original AI suggestion styled inline like a user comment (incorrect duplicate)\n3. This creates confusing duplicate display in the diff view\n\n## Expected Behavior\nAfter browser refresh:\n1. Adopted suggestions should remain in the AI panel with \"adopted\" status styling (green tint, no strikethrough)\n2. Only the resulting user comment from adoption should be visible inline\n3. The original AI suggestion should NOT be rendered as a user comment\n4. The adopted state should be properly persisted and restored\n\n## Root Cause Hypothesis\nThe adopted AI suggestions may be getting saved/loaded through a code path that treats them as user comments, causing them to be rendered twice - once through the user comments system and once through whatever is incorrectly styling the AI suggestion as a user comment.\n\n## Impact\n- Users lose visibility of which AI suggestions they've adopted in the AI panel\n- Duplicate comments clutter the diff view and cause confusion\n- The AI panel count/stats become inaccurate after refresh","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T16:29:21.159164-05:00","updated_at":"2025-12-31T16:48:12.127787-05:00","closed_at":"2025-12-31T16:48:12.127787-05:00"}
{"id":"pair_review-k5z","title":"Legacy worktrees are orphaned and not cleaned up","description":"## Problem\nAfter disabling the broken migration (commit 51bd68e), legacy worktrees created before the random ID system are now orphaned:\n\n1. **Not in Recent Reviews** - They have no database records\n2. **Not auto-cleaned** - Cleanup only works on DB records\n3. **Disk space waste** - Users accumulate orphaned worktrees\n4. **Duplicates created** - Opening an old PR creates a NEW worktree instead of reusing\n\n## Root Cause\nThe migration was disabled because it couldn't reliably parse directory names like `in-the-loop-labs-pair-review-123` - it's ambiguous which hyphen separates owner from repo when repo names contain hyphens.\n\n## User Experience Impact\n- Old reviews invisible in UI\n- Disk fills up with orphaned worktrees\n- Re-reviewing old PRs wastes time cloning again\n\n## Recommended Fix: Smart Detection\nWhen `createWorktreeForPR` is called:\n1. Check DB for existing record (current behavior)\n2. If not found, construct legacy path from PR info: `${owner}-${repo}-${number}`\n3. Check if that legacy directory exists AND is a valid git worktree\n4. If yes: create DB record for it and reuse (no parsing ambiguity - we know the owner/repo)\n5. If no: create new worktree with random ID (current behavior)\n\nThis works because we already have the parsed PR info from GitHub - no need to reverse-parse the directory name.\n\n## Implementation\nModify `GitWorktreeManager.createWorktreeForPR()` in `src/git/worktree.js`:\n```javascript\n// After DB lookup fails, before generating new random ID:\nconst legacyDirName = `${prInfo.owner}-${prInfo.repo}-${prInfo.number}`;\nconst legacyPath = path.join(this.worktreeBaseDir, legacyDirName);\nif (await this.pathExists(legacyPath)) {\n  // Validate it's a git worktree and create DB record\n  // Then reuse it\n}\n```","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T16:14:40.409453-05:00","updated_at":"2025-12-29T16:24:53.964125-05:00","closed_at":"2025-12-29T16:24:53.964125-05:00"}
{"id":"pair_review-k7u","title":"Reuse existing worktree when reopening same PR","description":"## Problem\nCurrently, opening a PR always deletes and recreates the worktree. This is wasteful if the worktree already exists.\n\n## Solution\nWhen opening a PR:\n1. Check if worktree exists in DB for this PR\n2. If exists and directory is valid:\n   - Check for local uncommitted changes\n   - If local changes exist → **error** (user must resolve manually)\n   - If clean → refresh from remote (git fetch + reset to PR head)\n   - Update `last_accessed_at` timestamp\n3. If not exists → create new worktree as usual\n\n## Implementation\n1. Add `WorktreeManager.refreshWorktree(worktreeRecord)` method:\n   - `git status --porcelain` to check for changes\n   - Throw error if uncommitted changes detected\n   - `git fetch origin pull/{number}/head` \n   - `git reset --hard FETCH_HEAD`\n2. Update `createWorktreeForPR()` to check DB first\n3. Add `WorktreeManager.hasLocalChanges(worktreePath)` helper\n\n## Error Message\n\"Worktree has uncommitted changes. Please resolve manually at: {path}\"\n\n## Dependencies\n- Requires worktrees database table (pair_review-452)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:56:21.508022-05:00","updated_at":"2025-12-28T16:25:23.759805-05:00","closed_at":"2025-12-28T16:25:23.759805-05:00","dependencies":[{"issue_id":"pair_review-k7u","depends_on_id":"pair_review-452","type":"blocks","created_at":"2025-12-28T15:56:34.965844-05:00","created_by":"daemon"},{"issue_id":"pair_review-k7u","depends_on_id":"pair_review-e4k","type":"blocks","created_at":"2025-12-28T15:56:43.493547-05:00","created_by":"daemon"}]}
{"id":"pair_review-kc6","title":"worktree naming convention","description":"instead of just using a random identifier for worktrees we should use a convention that indidcates that it came from pair-review. I.e. pair-review--xyz. Including the org + repo name is likely redundant as it is already a worktree for the repo it is associated with.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T12:23:51.866154-05:00","updated_at":"2025-12-30T12:23:51.866154-05:00"}
{"id":"pair_review-kes","title":"Fix N+1 query in recent worktrees endpoint","description":"The /api/worktrees/recent endpoint fetches worktrees then queries pr_metadata individually for each. Should use JOIN query instead.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T09:20:03.302894-05:00","updated_at":"2025-12-29T09:21:57.040464-05:00","closed_at":"2025-12-29T09:21:57.040464-05:00"}
{"id":"pair_review-ku8","title":"Auto-expand hidden lines when AI suggestions target them","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T18:11:22.226972-05:00","updated_at":"2025-12-31T18:15:24.057671-05:00","closed_at":"2025-12-31T18:15:24.057671-05:00"}
{"id":"pair_review-m3j","title":"Add commit_sha column to comments table","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T21:40:13.641056-05:00","updated_at":"2025-12-31T21:40:57.474728-05:00","closed_at":"2025-12-31T21:40:57.474728-05:00"}
{"id":"pair_review-mzl","title":"Update AI prompts to allow comments on any line in modified files","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T18:11:21.349196-05:00","updated_at":"2025-12-31T18:15:24.054259-05:00","closed_at":"2025-12-31T18:15:24.054259-05:00"}
{"id":"pair_review-nn5","title":"Preview modal shows incorrect/duplicate comments vs button count","description":"## Problem\nThe Preview modal is not correctly showing only the current user comments. The comment count on the button doesn't match what appears in the preview.\n\n## Current Behavior\n- Button shows N comments (e.g., \"Preview (3)\")\n- Preview modal contains more comments than expected\n- Includes doubled-up comments from AI suggestions\n- Count mismatch between button and preview content\n\n## Expected Behavior\n- Button count should accurately reflect the number of user comments\n- Preview should show exactly those comments, no more, no less\n- No duplicate entries from AI suggestions\n- Preview content should match the count displayed on the button\n\n## Related Issues\nThis may be related to pair_review-jq0 (adopted AI suggestions handled incorrectly on refresh) - the duplicate AI suggestion comments could be contaminating the preview.\n\n## Impact\n- Users cannot trust the comment count\n- Preview is unreliable for reviewing what will be submitted\n- Potential for submitting duplicate or unexpected comments to GitHub","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T16:39:52.932738-05:00","updated_at":"2025-12-31T17:06:40.870998-05:00","closed_at":"2025-12-31T17:06:40.870998-05:00"}
{"id":"pair_review-nxs","title":"Refactor createGapSection and createCollapsedSection to extract shared logic","description":"The createGapSection and createCollapsedSection functions in public/js/pr.js share ~140 lines of nearly identical logic for determining icon display, creating buttons, and attaching event handlers. Extract shared logic into helper functions (e.g., createExpandButton, determineIconDisplay, attachExpansionHandler) to reduce duplication and improve maintainability.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T08:53:32.750789-05:00","updated_at":"2025-12-27T08:53:42.094894-05:00"}
{"id":"pair_review-oow","title":"Update frontend to send commit_sha with comments","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T21:40:16.499453-05:00","updated_at":"2025-12-31T21:43:49.085942-05:00","closed_at":"2025-12-31T21:43:49.085942-05:00","dependencies":[{"issue_id":"pair_review-oow","depends_on_id":"pair_review-m3j","type":"blocks","created_at":"2025-12-31T21:40:23.083176-05:00","created_by":"daemon"}]}
{"id":"pair_review-p8n","title":"Change AI suggestion icon from single sparkle to sparkles","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T17:33:12.435408-05:00","updated_at":"2025-12-31T17:53:53.043807-05:00","closed_at":"2025-12-31T17:53:53.043807-05:00"}
{"id":"pair_review-pqb","title":"Hide type badges or restyle to prototype","description":"The prototype shows 'AI Suggestion' badge instead of type-specific badges. Either:\n- Replace type badges (Design, Improvement, Bug) with unified 'AI Suggestion' badge\n- Or restyle type badges to be more subtle and consistent\nFiles: public/js/pr.js, public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:39.823156-05:00","updated_at":"2025-12-30T21:46:02.369573-05:00","closed_at":"2025-12-30T21:46:02.369573-05:00","dependencies":[{"issue_id":"pair_review-pqb","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:05:04.692134-05:00","created_by":"daemon"}]}
{"id":"pair_review-qaj","title":"add support for context7","description":"This MCP could be useful for providing context on frameworks and libraries during review. It should be passed as a command line arg to . The pair-review configuration (or env variable) could be used for specifying a context7 API key.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T08:52:42.774364-05:00","updated_at":"2025-12-27T08:52:42.774364-05:00"}
{"id":"pair_review-qxu","title":"AI suggestion cards: Apply prototype card styling","description":"Update .ai-suggestion CSS to match prototype:\n- Remove any light/white backgrounds\n- Ensure consistent dark tertiary background (#181c23)\n- Amber left border (3px solid)\n- Amber glow shadow (box-shadow: 0 0 20px rgba(245,158,11,0.2))\n- Header with gradient background (amber-subtle → transparent)\n- Proper overflow:hidden and border-radius:6px\nFiles: public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:31.001466-05:00","updated_at":"2025-12-30T21:46:02.334645-05:00","closed_at":"2025-12-30T21:46:02.334645-05:00","dependencies":[{"issue_id":"pair_review-qxu","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:04:55.191321-05:00","created_by":"daemon"}]}
{"id":"pair_review-r2g","title":"UI: Display latest commit SHA on PR page","description":"Show the latest commit SHA that was synced/fetched in the PR page UI. This helps reviewers understand exactly which version of the code they are reviewing, especially useful when PRs are updated during a review session. Consider placement in the header area near PR title/metadata.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-31T21:00:36.491345-05:00","updated_at":"2025-12-31T21:00:36.491345-05:00"}
{"id":"pair_review-r7r","title":"Diff view: Update hunk header styling","description":"Update diff hunk headers to match prototype:\n- 'Expand N lines' button with expand icon\n- Hunk info showing @@ diff locations in muted color\n- Background color matching tertiary bg\nFiles: public/css/pr.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:04:38.443928-05:00","updated_at":"2025-12-30T21:46:02.375187-05:00","closed_at":"2025-12-30T21:46:02.375187-05:00","dependencies":[{"issue_id":"pair_review-r7r","depends_on_id":"pair_review-1mp","type":"blocks","created_at":"2025-12-30T21:05:03.540571-05:00","created_by":"daemon"}]}
{"id":"pair_review-rat","title":"add model selector when triggering AI analysis from UI","description":"Instead of starting analysis immediately there should be an intermediate dialog with an option to select the model. In the future, this dialog could grow to support other options like custom instructions","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T09:13:51.751693-05:00","updated_at":"2025-12-27T09:13:51.751693-05:00"}
{"id":"pair_review-rhh","title":"codebase health","description":"some files are getting large. how should the codebase be refactored for long-term maintenanc","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-27T09:15:29.949674-05:00","updated_at":"2025-12-27T09:15:29.949674-05:00","dependencies":[{"issue_id":"pair_review-rhh","depends_on_id":"pair_review-g7f","type":"blocks","created_at":"2025-12-29T16:15:26.225629-05:00","created_by":"daemon"}]}
{"id":"pair_review-s33","title":"UI Redesign: Command Center Elegance","description":"Implement the full design refresh based on the prototype in design-refresh/. Key goals:\n- Position AI as a prominent co-reviewer with amber/gold identity\n- Sticky header that remains at top of window\n- Three-panel layout with AI Analysis Panel on right\n- Refined typography and spacing throughout\n- Professional, streamlined, minimal aesthetic focused on productivity\n\nReference: design-refresh/index.html","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-30T19:38:02.070042-05:00","updated_at":"2025-12-30T19:52:42.437222-05:00","closed_at":"2025-12-30T19:52:42.437222-05:00"}
{"id":"pair_review-s33.1","title":"Sticky header with PR info and actions","description":"Implement a sticky header that remains positioned at the top of the window as user scrolls through the diff.\n\nHeader should include:\n- Logo/branding on left\n- PR title, number, branch info in center\n- Stats (+/-lines, file count)\n- Action buttons on right (View on GitHub, Submit Review)\n\nReference: design-refresh/index.html .header styles","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:38:16.88726-05:00","updated_at":"2025-12-30T19:51:23.795126-05:00","closed_at":"2025-12-30T19:51:23.795126-05:00","dependencies":[{"issue_id":"pair_review-s33.1","depends_on_id":"pair_review-s33","type":"parent-child","created_at":"2025-12-30T19:38:16.887606-05:00","created_by":"daemon"}]}
{"id":"pair_review-s33.2","title":"AI Analysis Panel (right sidebar)","description":"Add a dedicated AI Analysis Panel on the right side of the layout.\n\nPanel should include:\n- AI avatar/status indicator\n- Analysis depth indicator (Line/File/Codebase levels)\n- Findings summary with clickable list\n- Review progress tracker\n- Quick actions (Re-analyze, Explain Changes)\n- Future: Chat input placeholder\n\nThis makes AI a first-class co-reviewer presence rather than just inline suggestions.\n\nReference: design-refresh/index.html .ai-panel styles","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:38:17.89044-05:00","updated_at":"2025-12-30T19:51:23.797274-05:00","closed_at":"2025-12-30T19:51:23.797274-05:00","dependencies":[{"issue_id":"pair_review-s33.2","depends_on_id":"pair_review-s33","type":"parent-child","created_at":"2025-12-30T19:38:17.890773-05:00","created_by":"daemon"},{"issue_id":"pair_review-s33.2","depends_on_id":"pair_review-s33.3","type":"blocks","created_at":"2025-12-30T19:38:49.692624-05:00","created_by":"daemon"}]}
{"id":"pair_review-s33.3","title":"Three-panel layout structure","description":"Refactor the main layout to support three panels:\n- Left: File tree sidebar (existing, refined)\n- Center: Diff view (existing)\n- Right: AI Analysis Panel (new)\n\nThe layout should:\n- Use flexbox for responsive sizing\n- Support collapsing sidebars\n- Maintain usability at different viewport widths\n- Have consistent spacing and borders\n\nReference: design-refresh/index.html .main-layout styles","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:38:18.804184-05:00","updated_at":"2025-12-30T19:51:23.79651-05:00","closed_at":"2025-12-30T19:51:23.79651-05:00","dependencies":[{"issue_id":"pair_review-s33.3","depends_on_id":"pair_review-s33","type":"parent-child","created_at":"2025-12-30T19:38:18.804525-05:00","created_by":"daemon"}]}
{"id":"pair_review-s33.4","title":"AI status indicator in file sidebar","description":"Add an AI co-reviewer status section at the bottom of the file tree sidebar.\n\nShould show:\n- AI avatar with animated ring when active\n- Status text (Analyzing... / Analysis complete)\n- Findings count badge\n\nThis provides persistent visibility of AI state without requiring scroll.\n\nReference: design-refresh/index.html .ai-sidebar-status styles","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:38:33.530776-05:00","updated_at":"2025-12-30T19:51:23.797628-05:00","closed_at":"2025-12-30T19:51:23.797628-05:00","dependencies":[{"issue_id":"pair_review-s33.4","depends_on_id":"pair_review-s33","type":"parent-child","created_at":"2025-12-30T19:38:33.531112-05:00","created_by":"daemon"},{"issue_id":"pair_review-s33.4","depends_on_id":"pair_review-s33.3","type":"blocks","created_at":"2025-12-30T19:38:50.556918-05:00","created_by":"daemon"}]}
{"id":"pair_review-s33.5","title":"Typography and font refresh","description":"Update typography to use the new font stack:\n- UI text: DM Sans (Google Fonts)\n- Code: JetBrains Mono (Google Fonts)\n\nAdd font imports to pr.html and update CSS font-family declarations.\n\nReference: design-refresh/styles.css font variables","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:38:34.484378-05:00","updated_at":"2025-12-30T19:51:23.796937-05:00","closed_at":"2025-12-30T19:51:23.796937-05:00","dependencies":[{"issue_id":"pair_review-s33.5","depends_on_id":"pair_review-s33","type":"parent-child","created_at":"2025-12-30T19:38:34.484798-05:00","created_by":"daemon"}]}
{"id":"pair_review-s33.6","title":"Review submission modal redesign","description":"Update the review submission modal with the new design aesthetic.\n\nChanges:\n- Cleaner modal styling with backdrop blur\n- Review summary (comments count, AI suggestions adopted)\n- Status selector as visual radio buttons (Approve/Comment/Request Changes)\n- Refined button styling\n\nReference: design-refresh/index.html .review-modal styles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:38:35.614539-05:00","updated_at":"2025-12-30T19:52:34.08008-05:00","closed_at":"2025-12-30T19:52:34.08008-05:00","dependencies":[{"issue_id":"pair_review-s33.6","depends_on_id":"pair_review-s33","type":"parent-child","created_at":"2025-12-30T19:38:35.615147-05:00","created_by":"daemon"}]}
{"id":"pair_review-su1","title":"Add recently reviewed PRs list to landing page","description":"## Problem\nNo way to see or reopen previously reviewed PRs from the web UI. Users must remember PR numbers/URLs.\n\n## Solution\nAdd a \"Recent Reviews\" section to the landing page showing recently accessed worktrees.\n\n## UI Design\n```\n┌─────────────────────────────────────────────┐\n│  pair-review                                │\n├─────────────────────────────────────────────┤\n│                                             │\n│  [ Enter PR URL to start review ]  [Start] │\n│                                             │\n│  ─────────────────────────────────────────  │\n│                                             │\n│  Recent Reviews                             │\n│                                             │\n│  anthropic/pair-review #123                 │\n│  Fix authentication bug                     │\n│  Last opened: 2 hours ago              [→]  │\n│                                             │\n│  anthropic/claude-code #456                 │\n│  Add new feature                            │\n│  Last opened: 3 days ago               [→]  │\n│                                             │\n└─────────────────────────────────────────────┘\n```\n\n## Implementation\n1. Add API endpoint: `GET /api/worktrees/recent?limit=10`\n   - Returns list with: repository, pr_number, pr_title, last_accessed_at\n   - Join with pr_metadata for title\n2. Create landing page component (or update existing)\n3. Each item links to `/pr/{owner}/{repo}/{number}`\n4. Show all repos (cross-repository list)\n\n## Future enhancements (not in scope)\n- Search/filter by repo\n- Sort options\n- Pagination\n\n## Dependencies\n- Requires worktrees database table (pair_review-452)\n- Requires worktree reuse logic (so clicking opens existing)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:56:23.160887-05:00","updated_at":"2025-12-28T16:35:36.781128-05:00","closed_at":"2025-12-28T16:35:36.781128-05:00","dependencies":[{"issue_id":"pair_review-su1","depends_on_id":"pair_review-452","type":"blocks","created_at":"2025-12-28T15:56:35.00672-05:00","created_by":"daemon"},{"issue_id":"pair_review-su1","depends_on_id":"pair_review-k7u","type":"blocks","created_at":"2025-12-28T15:56:35.027112-05:00","created_by":"daemon"},{"issue_id":"pair_review-su1","depends_on_id":"pair_review-e4k","type":"blocks","created_at":"2025-12-28T15:56:43.538123-05:00","created_by":"daemon"}]}
{"id":"pair_review-u1x","title":"AI Panel: Depth status shows 'Not started' after analysis completes","description":"The Analysis Depth section shows 'Not started' and all levels as pending (empty circles) even after analysis has completed and findings are displayed. Expected: After analysis completes, depth levels should show as complete (green checkmarks). Root cause: AIPanel.updateDepthStatus() may not be called when findings are loaded from existing analysis.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-30T22:06:52.963202-05:00","updated_at":"2025-12-31T16:42:12.545178-05:00","closed_at":"2025-12-31T16:42:12.545178-05:00"}
{"id":"pair_review-udd","title":"Add programmatic filter for AI suggestions on non-PR files","description":"The orchestrator prompt instructs AI to filter out suggestions for files not in the PR diff, but this relies on AI compliance. Add a post-processing step that programmatically removes any suggestions targeting files not in the actual PR diff list, as a safeguard against Level 2/3 analysis including suggestions from imported files or dependencies.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-31T21:50:04.748199-05:00","updated_at":"2025-12-31T21:50:04.748199-05:00"}
{"id":"pair_review-v7u","title":"Repository name styling looks like a link","description":"In the recent reviews table, repository names are styled in blue which makes them look like clickable links. Options:\n\n1. Remove blue color if not a link\n2. Make it an actual link to a future repository page\n3. Use a different color that doesn't imply interactivity","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-29T08:05:35.144948-05:00","updated_at":"2025-12-29T08:28:12.109331-05:00","closed_at":"2025-12-29T08:28:12.109331-05:00","dependencies":[{"issue_id":"pair_review-v7u","depends_on_id":"pair_review-jbp","type":"blocks","created_at":"2025-12-29T08:05:54.708069-05:00","created_by":"daemon"}]}
{"id":"pair_review-wr0","title":"Expanded context comments fail GitHub API submission","description":"Comments on expanded context lines (lines revealed by clicking 'show more' but outside diff hunks) fail with 'Line could not be resolved' error from GitHub API. The same action works in GitHub's web UI, suggesting either: (1) GitHub uses a different API/GraphQL, (2) There's additional parameters needed, or (3) Web UI has special handling. Need to investigate how GitHub's web UI submits these comments.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-01T08:54:23.535277-05:00","updated_at":"2026-01-01T08:54:23.535277-05:00"}
{"id":"pair_review-yta","title":"Avoid re-suggesting dismissed AI suggestions on re-review","description":"When an AI suggestion is dismissed by the user, the system should remember this and avoid suggesting the same or very similar feedback on subsequent analysis runs. Implementation approaches to consider:\n\n1. **Embedding similarity**: Calculate embeddings for dismissed suggestions, compare new suggestions against them using cosine similarity, filter out matches above threshold\n2. **LLM comparison**: Pass dismissed suggestions as context to the AI and instruct it not to repeat similar feedback\n\nTrade-offs:\n- Embeddings: Faster, more deterministic, requires embedding model/API\n- LLM: Simpler implementation (just prompt engineering), but uses more tokens and may be less reliable\n\nRequires persisting dismissed suggestions (already tracked via status) and their content for comparison.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-31T21:21:15.893355-05:00","updated_at":"2025-12-31T21:21:15.893355-05:00"}
